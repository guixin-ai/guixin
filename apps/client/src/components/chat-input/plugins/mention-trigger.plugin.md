# 提及触发插件 (mention-trigger.plugin.tsx)

## 功能简介

提及触发插件负责监听@符号的输入，并在符合条件时触发提及功能。

## 处理流程

```mermaid
flowchart TD
    A[等待@符号输入] --> B[检测到@符号]
    B --> C{是范围选择?}
    C -->|否| A
    C -->|是| D{锚点焦点是否重叠?}
    D -->|否| A
    D -->|是| E{节点类型?}
    E -->|文本节点| F{光标在文本开头?}
    F -->|是| G[触发提及菜单]
    F -->|否| H{@符号前是空格?}
    H -->|是| G
    H -->|否| A
    E -->|段落节点| I{光标在段落开头?}
    I -->|是| G
    I -->|否| A
    E -->|其他节点| A
    G --> A
```

## 触发条件

提及功能只有在同时满足以下条件时才会触发:

1. 用户输入了`@`符号
2. 当前是范围选择（RangeSelection）
3. 锚点和焦点重叠（没有文本选择范围）
4. 根据节点类型，满足以下对应条件:
   - 文本节点:
     - `@`符号在文本的开头位置，或
     - `@`符号前面是空格字符
   - 段落节点:
     - `@`符号仅在段落的开头位置 