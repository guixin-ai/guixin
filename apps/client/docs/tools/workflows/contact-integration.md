# 联系人调用工作流

本页面详细介绍如何配置和使用智能联系人调用工作流功能，让您的自定义工作流成为联系人可用的强大工具。

## 工作流调用概述

硅信平台允许智能联系人作为工具调用您创建的自定义工作流，使联系人能够执行复杂的任务和流程。通过这种集成，联系人的能力得到极大扩展，可以处理更多专业和个性化的需求。

## 工作原理

联系人调用工作流的基本流程如下：

1. **触发阶段**：

   - 用户提出需求或问题
   - 联系人识别需要使用工作流解决
   - 联系人选择合适的工作流进行调用

2. **参数阶段**：

   - 联系人从对话中提取必要参数
   - 如有缺失参数，联系人会询问用户
   - 参数验证和格式化

3. **执行阶段**：

   - 工作流接收参数并开始执行
   - 联系人可以显示执行进度
   - 工作流按设计流程执行各步骤

4. **结果阶段**：
   - 工作流执行完成，返回结果
   - 联系人接收并解析结果
   - 联系人将结果以易于理解的方式展示给用户

## 配置工作流为联系人工具

要使工作流可被联系人调用，需要进行特定配置：

### 工作流设计要点

1. **添加联系人调用触发器**：

   - 在工作流编辑器中，选择"触发器" > "联系人调用"
   - 这表明该工作流可以被智能联系人作为工具调用

2. **定义输入参数**：

   - 配置工作流所需的输入参数
   - 为每个参数设置：
     - 名称：参数的标识符
     - 类型：参数的数据类型（文本、数字、布尔等）
     - 描述：参数的详细说明
     - 是否必需：是否为必填参数
     - 默认值：未提供时的默认值

3. **设置输出格式**：

   - 定义工作流返回结果的结构和格式
   - 配置易于联系人理解和处理的数据格式
   - 可选择JSON、文本、表格等格式

4. **添加工作流描述**：
   - 提供清晰的工作流功能说明
   - 描述使用场景和示例
   - 这些信息将帮助联系人理解何时使用此工作流

### 工作流发布和授权

1. **发布工作流**：

   - 在工作流编辑器中点击"发布"按钮
   - 填写版本信息和更新说明
   - 选择发布环境（测试或生产）

2. **授权给联系人**：
   - 进入"联系人管理" > 选择目标联系人
   - 点击"工具管理" > "自定义工具"
   - 在工作流列表中启用您创建的工作流
   - 设置调用权限（自动使用、询问后使用或仅指令使用）

## 联系人调用工作流的方式

智能联系人可以通过不同方式调用工作流：

### 自动识别调用

当联系人识别到用户需求适合使用特定工作流时，会自动调用：

1. **触发条件**：

   - 用户提出与工作流功能相关的请求
   - 联系人判断工作流是解决问题的最佳方式
   - 联系人具有"自动使用"工作流的权限

2. **交互流程**：

   - 联系人可能会告知用户将使用工作流
   - 如有缺失参数，会询问用户提供
   - 执行工作流并返回结果

3. **使用示例**：

   ```
   用户：整理一下最近三个月的销售数据，并分析各产品的表现。

   联系人：我将使用"销售数据分析"工作流来帮您完成这项任务。
   请问您需要包含哪些具体产品线的数据？

   用户：所有产品线。

   联系人：好的，正在处理数据...
   [执行工作流]

   根据分析结果，过去三个月销售表现最好的是产品A，增长了23%...
   ```

### 明确指令调用

用户可以明确指示联系人使用特定工作流：

1. **触发方式**：

   - 用户直接指定要使用的工作流名称
   - 使用特定命令格式请求使用工作流

2. **命令格式**：

   - `使用[工作流名称]工作流`
   - `运行[工作流名称]，参数1=值1，参数2=值2...`
   - `/workflow [工作流名称] [参数]`

3. **使用示例**：

   ```
   用户：使用"文档摘要生成"工作流处理我上传的这份报告。

   联系人：好的，我将使用"文档摘要生成"工作流。
   请设置摘要长度？（默认500字）

   用户：300字即可。

   联系人：正在处理...
   [执行工作流]

   已完成300字的报告摘要：[摘要内容]
   ```

### 工作流推荐

联系人可以在对话中推荐可能有用的工作流：

1. **推荐场景**：

   - 联系人识别到问题复杂，可通过工作流更好解决
   - 有多种方案可选，工作流是其中之一
   - 联系人权限设置为"询问后使用"

2. **交互流程**：

   - 联系人介绍工作流及其优势
   - 询问用户是否愿意使用
   - 经用户确认后执行

3. **推荐示例**：

   ```
   用户：我需要监控多个社交媒体平台上关于我们产品的提及。

   联系人：针对这个需求，我建议使用"社交媒体监控"工作流，它可以自动收集多平台数据并生成分析报告。您想使用这个工作流吗？

   用户：好的，试试看。

   联系人：请提供您需要监控的产品名称和关键词。
   ```

## 工作流参数处理

联系人如何处理工作流所需的参数：

### 参数收集方式

1. **从对话提取**：

   - 联系人分析对话内容，提取相关信息作为参数
   - 利用上下文理解能力识别参数值

2. **主动询问**：

   - 对于缺失的必要参数，联系人会主动询问
   - 提供参数说明和默认值建议

3. **参数确认**：
   - 对于复杂或重要参数，联系人可能要求确认
   - 展示参数摘要供用户确认

### 参数类型支持

联系人能够处理多种类型的工作流参数：

1. **基本类型**：

   - 文本字符串
   - 数字（整数/浮点数）
   - 布尔值（是/否）
   - 日期和时间

2. **复杂类型**：

   - 列表和数组
   - 键值对和结构化数据
   - 文件和二进制数据

3. **特殊格式**：
   - JSON数据
   - URL和链接
   - 地理位置
   - 枚举选项

## 结果展示与解释

联系人如何处理工作流执行结果：

### 结果格式化

1. **文本格式化**：

   - 将原始数据转换为易读文本
   - 根据内容类型调整格式（列表、表格等）
   - 突出显示重要信息

2. **视觉呈现**：

   - 对于图表和图形结果，直接显示
   - 针对数据结果，可生成简单可视化
   - 支持各种格式的文件和媒体

3. **结构化展示**：
   - 针对复杂结果，组织成清晰的层次结构
   - 使用标题、分点和强调突出关键部分

### 结果解释

联系人不仅展示结果，还能提供解释：

1. **结果总结**：

   - 提供执行结果的简要总结
   - 突出最重要的发现或结论

2. **上下文解释**：

   - 解释结果在用户问题背景下的意义
   - 提供结果数据的背景信息

3. **后续建议**：
   - 基于结果提供下一步行动建议
   - 推荐可能的深入分析或其他相关工作流

## 高级特性

### 多轮工作流交互

支持复杂的多轮工作流调用交互：

1. **中间结果反馈**：

   - 长时间运行的工作流可返回中间结果
   - 联系人可呈现进度和部分结果

2. **交互式决策点**：

   - 工作流可在关键点暂停，要求用户决策
   - 联系人协助用户理解选项并收集决策

3. **多工作流链接**：
   - 联系人可根据一个工作流的结果建议使用另一个工作流
   - 支持工作流之间的结果传递

### 工作流调试与反馈

帮助用户理解和改进工作流：

1. **错误解释**：

   - 当工作流执行失败时，联系人可解释错误原因
   - 提供故障排除建议

2. **执行详情**：

   - 用户可要求查看工作流执行的详细日志
   - 联系人可解释每个步骤的执行情况

3. **改进建议**：
   - 基于使用模式，联系人可提出工作流改进建议
   - 推荐参数调整或流程优化

## 最佳实践

### 工作流设计建议

为确保联系人能有效调用工作流：

1. **明确的工作流名称和描述**：

   - 使用具描述性的名称，反映功能
   - 提供详细描述，帮助联系人理解用途

2. **清晰的参数定义**：

   - 使用直观的参数名称
   - 提供完整的参数描述和示例
   - 设置合理的默认值

3. **结构化的输出格式**：
   - 返回易于解析的数据结构
   - 包含状态标志和错误信息字段
   - 添加结果摘要和说明字段

### 使用技巧

提高联系人调用工作流的效果：

1. **提供明确指令**：

   - 清晰描述您的需求和期望
   - 提及工作流名称如果您想使用特定工作流

2. **回答参数问题**：

   - 直接回答联系人关于参数的问题
   - 提供准确和完整的参数信息

3. **理解工作流能力**：
   - 了解您的工作流能做什么和不能做什么
   - 熟悉常用工作流的参数和功能

## 故障排除

解决联系人调用工作流时可能遇到的问题：

### 常见问题与解决方案

1. **联系人无法识别工作流**：

   - 确认工作流已正确发布
   - 验证工作流已授权给该联系人
   - 尝试使用完整的工作流名称

2. **参数收集问题**：

   - 检查工作流参数是否有明确描述
   - 直接提供完整参数，格式为"参数名=参数值"
   - 检查参数类型是否匹配

3. **执行失败**：

   - 查看工作流执行日志
   - 检查外部依赖服务是否可用
   - 验证输入参数是否在有效范围内

4. **结果解释不清**：
   - 改进工作流的输出格式
   - 要求联系人提供更详细的结果解释
   - 调整工作流添加更多上下文信息

## 下一步

- 了解如何[创建工作流](/tools/workflows/create)
- 探索可用的[工作流组件](/tools/workflows/components)
- 掌握[工作流调试](/tools/workflows/debug)技巧
- 学习[工作流部署](/tools/workflows/deploy)选项
- 查看[API工具配置](/tools/api-config)与工作流的集成
